{"ast":null,"code":"import _defineProperty from\"/home/seraphim/Code/js/weather-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/home/seraphim/Code/js/weather-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'./App.css';import{Map}from'./components/Map';import{Bar}from'./components/Bar';import{Url,ApiKey}from'./constants.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),cache=_useState2[0],setCache=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),region=_useState4[0],setRegion=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),regionID=_useState6[0],setRegionID=_useState6[1];var handlerSetRegion=function handlerSetRegion(el){handlerUploadApi(el);setRegion(el);};var handlerUploadApi=function handlerUploadApi(el){var id=el.attributes.id.nodeValue;if(cache[id]===undefined){fetch(\"\".concat(Url,\"/point?place_id=\").concat(id,\"&key=\").concat(ApiKey)).catch(function(err){return alert(\"1 step - \".concat(err));}).then(function(res){return res.json();}).catch(function(err){return alert(\"2 step - \".concat(err));}).then(function(res){setCache(Object.assign(cache,_defineProperty({},id,res)));setRegionID(id);setRegion(el);}).catch(function(err){return alert(\"3 step - \".concat(err));});}else{setRegionID(id);setRegion(el);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Map,{handler:handlerSetRegion,selected:region}),/*#__PURE__*/_jsx(Bar,{data:cache[regionID]!==undefined?cache[regionID]:{},selected:region})]});};export default App;","map":{"version":3,"names":["React","useState","Map","Bar","Url","ApiKey","App","cache","setCache","region","setRegion","regionID","setRegionID","handlerSetRegion","el","handlerUploadApi","id","attributes","nodeValue","undefined","fetch","catch","err","alert","then","res","json","Object","assign"],"sources":["/home/seraphim/Code/js/weather-app/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport './App.css';\nimport { Map } from './components/Map';\nimport { Bar } from './components/Bar';\nimport { Url, ApiKey } from './constants.js';\n\nconst App = () => {\n  const [cache, setCache] = useState({});\n  const [region, setRegion] = useState( null );\n  const [regionID, setRegionID] = useState( null );\n\n  const handlerSetRegion = (el) => {\n    handlerUploadApi( el );\n    setRegion( el );\n  }\n\n  const handlerUploadApi = ( el ) => {\n    const id = el.attributes.id.nodeValue;\n\n    if (cache[id] === undefined) {\n      fetch(`${Url}/point?place_id=${id}&key=${ApiKey}`)\n        .catch(err => alert(`1 step - ${err}`))\n        .then(res => res.json())\n        .catch(err => alert(`2 step - ${err}`))\n        .then(res => {\n          setCache(Object.assign(cache, {[id]: res}))\n          setRegionID( id );\n          setRegion( el );\n        })\n        .catch(err => alert(`3 step - ${err}`))\n    } else {\n      setRegionID( id );\n      setRegion( el );\n    }\n  }\n\n  return (\n    <div className='app'>\n      <Map handler={ handlerSetRegion }  selected={ region } />\n      <Bar\n        data={ cache[regionID] !== undefined ? cache[regionID] : {} }\n        selected={ region }\n      />\n    </div>\n  )\n}\n\nexport default App;\n"],"mappings":"kPAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,WAAW,CAClB,OAASC,GAAG,KAAQ,kBAAkB,CACtC,OAASC,GAAG,KAAQ,kBAAkB,CACtC,OAASC,GAAG,CAAEC,MAAM,KAAQ,gBAAgB,CAAC,wFAE7C,GAAMC,IAAG,CAAG,QAANA,IAAG,EAAS,CAChB,cAA0BL,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAA/BM,KAAK,eAAEC,QAAQ,eACtB,eAA4BP,QAAQ,CAAE,IAAI,CAAE,yCAArCQ,MAAM,eAAEC,SAAS,eACxB,eAAgCT,QAAQ,CAAE,IAAI,CAAE,yCAAzCU,QAAQ,eAAEC,WAAW,eAE5B,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAIC,EAAE,CAAK,CAC/BC,gBAAgB,CAAED,EAAE,CAAE,CACtBJ,SAAS,CAAEI,EAAE,CAAE,CACjB,CAAC,CAED,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAKD,EAAE,CAAM,CACjC,GAAME,GAAE,CAAGF,EAAE,CAACG,UAAU,CAACD,EAAE,CAACE,SAAS,CAErC,GAAIX,KAAK,CAACS,EAAE,CAAC,GAAKG,SAAS,CAAE,CAC3BC,KAAK,WAAIhB,GAAG,4BAAmBY,EAAE,iBAAQX,MAAM,EAAG,CAC/CgB,KAAK,CAAC,SAAAC,GAAG,QAAIC,MAAK,oBAAaD,GAAG,EAAG,GAAC,CACtCE,IAAI,CAAC,SAAAC,GAAG,QAAIA,IAAG,CAACC,IAAI,EAAE,GAAC,CACvBL,KAAK,CAAC,SAAAC,GAAG,QAAIC,MAAK,oBAAaD,GAAG,EAAG,GAAC,CACtCE,IAAI,CAAC,SAAAC,GAAG,CAAI,CACXjB,QAAQ,CAACmB,MAAM,CAACC,MAAM,CAACrB,KAAK,oBAAIS,EAAE,CAAGS,GAAG,EAAE,CAAC,CAC3Cb,WAAW,CAAEI,EAAE,CAAE,CACjBN,SAAS,CAAEI,EAAE,CAAE,CACjB,CAAC,CAAC,CACDO,KAAK,CAAC,SAAAC,GAAG,QAAIC,MAAK,oBAAaD,GAAG,EAAG,GAAC,CAC3C,CAAC,IAAM,CACLV,WAAW,CAAEI,EAAE,CAAE,CACjBN,SAAS,CAAEI,EAAE,CAAE,CACjB,CACF,CAAC,CAED,mBACE,aAAK,SAAS,CAAC,KAAK,wBAClB,KAAC,GAAG,EAAC,OAAO,CAAGD,gBAAkB,CAAE,QAAQ,CAAGJ,MAAQ,EAAG,cACzD,KAAC,GAAG,EACF,IAAI,CAAGF,KAAK,CAACI,QAAQ,CAAC,GAAKQ,SAAS,CAAGZ,KAAK,CAACI,QAAQ,CAAC,CAAG,CAAC,CAAG,CAC7D,QAAQ,CAAGF,MAAQ,EACnB,GACE,CAEV,CAAC,CAED,cAAeH,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}